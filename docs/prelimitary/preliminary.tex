\section{Preliminary Result}

Now we present the preliminary results of our assertion-based debugging framework. We have implemented a simpler version of the architecture in Figure \ref{fig:overview}, with only a single programmer agent and a tester agent, using OpenAI \texttt{gpt-4o} model. We try to evaluate the effectiveness of the framework on HumanEvalPlus~\cite{evalplus}. However, we are not able to finish the evaluation due to the time constraint. We will continue to work on the evaluation and provide the results in the final paper.

Here, we present an example program generated by the programmer agent, as shown in Figure \ref{fig:program}. The program is designed to determine whether any two numbers in a list are closer to each other than a specified threshold. 
The program is heavily-asserted, with assertions to check the input types, the threshold value, and the correctness of the output. The program also includes assertions to verify the correctness of the intermediate results.
While the program is correct and adheres to the given constraints, the test case \pyth{assert has_close_elements([5.0, 5.6, 5.9, 8.0], 0.3) == True}, generated by the tester agent, is incorrect. This is due to standard floating-point semantics, which yield \pyth{5.9 - 5.6 > 0.3}. This highlights the potential advantage of the assertion-based debugging framework, where the programmer agent generates assertions to verify program correctness. These assertions are iteratively refined by the debugger agent, reducing reliance on test cases alone.

\begin{figure*}[t]
\begin{python}
def has_close_elements(numbers: List[float], threshold: float) -> bool:
    """
    Check if in given list of numbers, there are any two numbers closer to each other than
    the given threshold.
    """

    assert isinstance(numbers, list)
    for num in numbers:
        assert isinstance(num, (int, float))
    assert isinstance(threshold, (int, float))
    assert threshold > 0

    if len(numbers) < 2:
        return False

    sorted_numbers = sorted(numbers)

    for i in range(len(sorted_numbers) - 1):
        for j in range(i):
            diff = abs(sorted_numbers[j+1] - sorted_numbers[j])
            assert diff >= threshold
        
        diff = abs(sorted_numbers[i+1] - sorted_numbers[i])
        assert diff >= 0
        if diff < threshold:
            result = True
            assert any(abs(sorted_numbers[k+1] - sorted_numbers[k])\
                < threshold for k in range(len(sorted_numbers)-1))
            return result

    result = False
    for i in range(len(sorted_numbers) - 1):
        diff = abs(sorted_numbers[i+1] - sorted_numbers[i])
        assert diff >= threshold
    assert isinstance(result, bool)
    return result

# Traceback (most recent call last):
#  File "/tmp/testing_python_program.py", line 28, in <module>
#    assert has_close_elements([5.0, 5.6, 5.9, 8.0], 0.3) == True
#           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
# AssertionError
\end{python}
\caption{Example of a generated program by the programmer agent.}
\label{fig:program}
\end{figure*}