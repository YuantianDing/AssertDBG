{"in": {"attempt": -1, "prompt": "\ndef order_by_points(nums):\n    \"\"\"\n    Write a function which sorts the given list of integers\n    in ascending order according to the sum of their digits.\n    Note: if there are several items with similar sum of their digits,\n    order them based on their index in original list.\n\n    For example:\n    >>> order_by_points([1, 11, -1, -11, -12]) == [-1, -11, 1, -12, 11]\n    >>> order_by_points([]) == []\n    \"\"\"\n", "with_assert": true, "verbose": 2}, "out": {"main_func": {"function_name": "order_by_points", "code": "def order_by_points(nums):\n    \"\"\"\n    Write a function which sorts the given list of integers\n    in ascending order according to the sum of their digits.\n    Note: if there are several items with similar sum of their digits,\n    order them based on their index in original list.\n\n    For example:\n    >>> order_by_points([1, 11, -1, -11, -12]) == [-1, -11, 1, -12, 11]\n    >>> order_by_points([]) == []\n    \"\"\"\n    def digit_sum(x):\n        # Calculate the sum of the absolute value of the digits of x\n        return sum(int(d) for d in str(abs(x)))\n    \n    assert isinstance(nums, list), \"Input must be a list, got {}\".format(type(nums))\n    for i, num in enumerate(nums):\n        assert isinstance(num, int), \"Each element in nums must be an integer, got element {} at index {} of type {}\".format(num, i, type(num))\n    \n    result = sorted(nums, key=lambda x: (digit_sum(x), nums.index(x)))\n    \n    assert isinstance(result, list), \"Output must be a list, got {}\".format(type(result))\n    for i in range(1, len(result)):\n        sum_prev = digit_sum(result[i - 1])\n        sum_curr = digit_sum(result[i])\n        assert sum_prev <= sum_curr, \"List is not sorted by digit sum: {} (sum {}) > {} (sum {}) at indices {} and {}\".format(\n            result[i - 1], sum_prev, result[i], sum_curr, i - 1, i\n        )\n        if sum_prev == sum_curr:\n            index_prev = nums.index(result[i - 1])\n            index_curr = nums.index(result[i])\n            assert index_prev < index_curr, \"Items with the same digit sum are out of order based on original list indices: \" \\\n                                           \"index {} in original > index {} for {} and {}\".format(\n                index_prev, index_curr, result[i - 1], result[i]\n            )\n    return result\n"}, "subfunctions": [{"function_name": "digit_sum", "code": "def digit_sum(num: int) -> int:\n    \"\"\"\n    Calculate the sum of digits of a given integer.\n    Handles both positive and negative numbers by considering absolute value.\n\n    :param num: Integer whose digit sum is to be calculated.\n    :return: Sum of digits of the integer.\n    \"\"\"\n    assert isinstance(num, int), f\"Input must be an integer, got {type(num)} with value {num}\"\n    \n    # Use absolute value to handle negative numbers\n    num = abs(num)\n    \n    # Convert the number to a string to iterate over digits\n    num_str = str(num)\n    assert num_str.isdigit(), f\"After conversion to absolute, expected numeric string, got {num_str}\"\n    \n    # Sum the digits\n    digit_sum_result = sum(int(digit) for digit in num_str)\n    \n    assert isinstance(digit_sum_result, int), f\"Output must be an integer, got {type(digit_sum_result)}\"\n    assert digit_sum_result >= 0, f\"Sum of digits should not be negative, got {digit_sum_result}\"\n    \n    return digit_sum_result\n"}]}}